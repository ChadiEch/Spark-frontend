import{o as ve,s as O,e as ye,d as K,n as be,a as De,r as I,u as Se,t as ke,j as e,F as Pe,b as S,c as k,f as P,g as $,I as J,h as F,T as Ee,S as X,i as _,k as q,l as Q,m as Y,P as ee,p as se,B as x,q as te,v as ae,C as ne,w as re,x as le,D as Te,y as Ae,z as Me,A as V,E as ue,G as ie,H as de,J as oe,K as $e,L as Fe,M as Ie,N as ze,O as ce,Q as me,R as Ve,U as Le,V as Be,W as Re,X as he,Y as Ye,Z as Oe,_ as Ue,$ as We,a0 as He,a1 as Ze,a2 as f}from"./index-BorZE5ZK.js";const Ge=ve({name:O().min(1,{message:"Name is required"}).max(100),description:O().max(500).optional(),status:ye(["UPCOMING","ACTIVE","COMPLETED","ARCHIVED"]),startDate:K(),endDate:K(),budget:be().min(0).optional(),channels:De(O()).min(1,{message:"Select at least one channel"}),createdBy:O().min(1,{message:"Creator is required"})});function Ke({onSubmit:r,onCancel:p,initialData:o}){const[E]=I.useState([{id:"1",name:"Sarah Johnson"},{id:"2",name:"Micha Rodriguez"},{id:"3",name:"Jad Al-Hassan"},{id:"4",name:"Ammar Khan"}]),L=[{id:"INSTAGRAM",name:"Instagram"},{id:"TIKTOK",name:"TikTok"},{id:"FACEBOOK",name:"Facebook"},{id:"PINTEREST",name:"Pinterest"},{id:"X",name:"X (Twitter)"},{id:"YOUTUBE",name:"YouTube"}],u=Se({resolver:ke(Ge),defaultValues:o||{name:"",description:"",status:"UPCOMING",startDate:new Date,endDate:new Date(new Date().setMonth(new Date().getMonth()+1)),budget:0,channels:[],createdBy:""}});function m(n){const c={...n,budgetCents:n.budget?Math.round(n.budget*100):0};r(c)}return e.jsx(Pe,{...u,children:e.jsxs("form",{onSubmit:u.handleSubmit(m),className:"space-y-6",children:[e.jsx(S,{control:u.control,name:"name",render:({field:n})=>e.jsxs(k,{children:[e.jsx(P,{children:"Campaign Name"}),e.jsx($,{children:e.jsx(J,{placeholder:"Campaign name",...n})}),e.jsx(F,{})]})}),e.jsx(S,{control:u.control,name:"description",render:({field:n})=>e.jsxs(k,{children:[e.jsx(P,{children:"Description"}),e.jsx($,{children:e.jsx(Ee,{placeholder:"Campaign description",className:"resize-none",...n})}),e.jsx(F,{})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(S,{control:u.control,name:"status",render:({field:n})=>e.jsxs(k,{children:[e.jsx(P,{children:"Status"}),e.jsxs(X,{onValueChange:n.onChange,defaultValue:n.value,children:[e.jsx($,{children:e.jsx(_,{children:e.jsx(q,{placeholder:"Select status"})})}),e.jsxs(Q,{children:[e.jsx(Y,{value:"UPCOMING",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-yellow-500 mr-2"}),e.jsx("span",{children:"Upcoming"})]})}),e.jsx(Y,{value:"ACTIVE",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500 mr-2"}),e.jsx("span",{children:"Active"})]})}),e.jsx(Y,{value:"COMPLETED",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-500 mr-2"}),e.jsx("span",{children:"Completed"})]})}),e.jsx(Y,{value:"ARCHIVED",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-gray-500 mr-2"}),e.jsx("span",{children:"Archived"})]})})]})]}),e.jsx(F,{})]})}),e.jsx(S,{control:u.control,name:"createdBy",render:({field:n})=>e.jsxs(k,{children:[e.jsx(P,{children:"Created By"}),e.jsxs(X,{onValueChange:n.onChange,defaultValue:n.value,children:[e.jsx($,{children:e.jsx(_,{children:e.jsx(q,{placeholder:"Select creator"})})}),e.jsx(Q,{children:E.map(c=>e.jsx(Y,{value:c.id,children:c.name},c.id))})]}),e.jsx(F,{})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(S,{control:u.control,name:"startDate",render:({field:n})=>e.jsxs(k,{className:"flex flex-col",children:[e.jsx(P,{children:"Start Date"}),e.jsxs(ee,{children:[e.jsx(se,{asChild:!0,children:e.jsx($,{children:e.jsxs(x,{variant:"outline",className:te("w-full pl-3 text-left font-normal",!n.value&&"text-muted-foreground"),children:[n.value?ae(n.value,"PPP"):e.jsx("span",{children:"Pick a date"}),e.jsx(ne,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),e.jsx(re,{className:"w-auto p-0",align:"start",children:e.jsx(le,{mode:"single",selected:n.value,onSelect:n.onChange,disabled:c=>c>new Date||c<new Date("1900-01-01"),initialFocus:!0})})]}),e.jsx(F,{})]})}),e.jsx(S,{control:u.control,name:"endDate",render:({field:n})=>e.jsxs(k,{className:"flex flex-col",children:[e.jsx(P,{children:"End Date"}),e.jsxs(ee,{children:[e.jsx(se,{asChild:!0,children:e.jsx($,{children:e.jsxs(x,{variant:"outline",className:te("w-full pl-3 text-left font-normal",!n.value&&"text-muted-foreground"),children:[n.value?ae(n.value,"PPP"):e.jsx("span",{children:"Pick a date"}),e.jsx(ne,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),e.jsx(re,{className:"w-auto p-0",align:"start",children:e.jsx(le,{mode:"single",selected:n.value,onSelect:n.onChange,disabled:c=>c<new Date,initialFocus:!0})})]}),e.jsx(F,{})]})})]}),e.jsx(S,{control:u.control,name:"budget",render:({field:n})=>e.jsxs(k,{children:[e.jsx(P,{children:"Budget (USD)"}),e.jsxs("div",{className:"relative",children:[e.jsx(Te,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx($,{children:e.jsx(J,{type:"number",placeholder:"0.00",className:"pl-10",...n,onChange:c=>n.onChange(Number(c.target.value))})})]}),e.jsx(F,{})]})}),e.jsx(S,{control:u.control,name:"channels",render:()=>e.jsxs(k,{children:[e.jsxs("div",{className:"mb-3",children:[e.jsx(P,{className:"text-base",children:"Channels"}),e.jsx(Ae,{children:"Select the social media channels for this campaign"})]}),L.map(n=>e.jsx(S,{control:u.control,name:"channels",render:({field:c})=>{var b;const z=T=>{switch(T){case"INSTAGRAM":return"bg-gradient-to-r from-purple-500 to-pink-500";case"TIKTOK":return"bg-black text-white";case"FACEBOOK":return"bg-blue-600 text-white";case"PINTEREST":return"bg-red-600 text-white";case"X":return"bg-black text-white";case"YOUTUBE":return"bg-red-600 text-white";default:return"bg-gray-500 text-white"}};return e.jsxs(k,{className:"flex flex-row items-start space-x-3 space-y-0",children:[e.jsx($,{children:e.jsx(Me,{checked:(b=c.value)==null?void 0:b.includes(n.id),onCheckedChange:T=>{var w;return T?c.onChange([...c.value||[],n.id]):c.onChange((w=c.value)==null?void 0:w.filter(B=>B!==n.id))}})}),e.jsxs(P,{className:"font-normal flex items-center",children:[e.jsx("span",{className:`inline-block w-3 h-3 rounded-full mr-2 ${z(n.id)}`}),n.name]})]},n.id)}},n.id)),e.jsx(F,{})]})}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx(x,{type:"button",variant:"outline",onClick:p,children:"Cancel"}),e.jsx(x,{type:"submit",className:"bg-gradient-primary hover:bg-gradient-primary/90",children:"Save Campaign"})]})]})})}function Je({currentDate:r,view:p,selectedDate:o,calendarEvents:E,onViewPost:L,onEditPost:u,onDeletePost:m,onViewCampaign:n,onEditCampaign:c,onDeleteCampaign:z,onDateSelect:b,onChangeView:T}){I.useState(null);const w=l=>new Date(l.getFullYear(),l.getMonth()+1,0).getDate(),B=l=>new Date(l.getFullYear(),l.getMonth(),1).getDay(),D=l=>{const h=[],g=new Date(l);g.setDate(l.getDate()-l.getDay());for(let t=0;t<7;t++){const j=new Date(g);j.setDate(g.getDate()+t),h.push(j)}return h},R=l=>E.filter(h=>{if(!h.id||!h.date)return console.error("Event is missing required fields:",h),!1;const g=new Date(h.date);return g.getDate()===l.getDate()&&g.getMonth()===l.getMonth()&&g.getFullYear()===l.getFullYear()}),A=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],v=()=>{const l=w(r),h=B(r),g=[];for(let t=0;t<h;t++)g.push(e.jsx("div",{className:"p-2"},`empty-${t}`));for(let t=1;t<=l;t++){const j=new Date(r.getFullYear(),r.getMonth(),t),y=R(j),C=t===new Date().getDate()&&r.getMonth()===new Date().getMonth()&&r.getFullYear()===new Date().getFullYear(),d=o&&t===o.getDate()&&r.getMonth()===o.getMonth()&&r.getFullYear()===o.getFullYear();g.push(e.jsxs("div",{className:`p-2 min-h-24 border border-border hover:bg-accent/50 transition-colors cursor-pointer ${C?"bg-primary/10 border-primary":""} ${d?"ring-2 ring-primary":""}`,onClick:()=>{b(j),p==="month"&&T("day")},children:[e.jsx("div",{className:`text-sm font-medium mb-1 ${C?"text-primary":""}`,children:t}),e.jsxs("div",{className:"space-y-1",children:[y.slice(0,3).map(M=>e.jsx("div",{className:`text-xs px-1 py-0.5 rounded truncate ${M.type==="post"?"bg-primary/20 text-primary":M.type==="campaign"?"bg-success/20 text-success":"bg-warning/20 text-warning"}`,children:M.title},M.id)),y.length>3&&e.jsxs("div",{className:"text-xs text-muted-foreground",children:["+",y.length-3," more"]})]})]},t))}return g},U=()=>{const l=D(r);return e.jsx("div",{className:"grid grid-cols-7 gap-px bg-border rounded-lg overflow-hidden",children:l.map((h,g)=>{const t=R(h),j=h.toDateString()===new Date().toDateString(),y=o&&h.toDateString()===o.toDateString();return e.jsxs("div",{className:`p-2 min-h-32 border border-border hover:bg-accent/50 transition-colors ${j?"bg-primary/10 border-primary":""} ${y?"ring-2 ring-primary":""}`,onClick:()=>{b(h),p==="week"&&T("day")},children:[e.jsxs("div",{className:`text-sm font-medium mb-1 ${j?"text-primary":""}`,children:[A[h.getDay()],e.jsx("span",{className:`block text-lg ${j?"text-primary":""}`,children:h.getDate()})]}),e.jsx("div",{className:"space-y-1",children:t.map(C=>e.jsx("div",{className:`text-xs px-1 py-0.5 rounded truncate ${C.type==="post"?"bg-primary/20 text-primary":C.type==="campaign"?"bg-success/20 text-success":"bg-warning/20 text-warning"}`,children:C.title},C.id))})]},g)})})},W=()=>{const l=o||r,h=R(l),g=l.toDateString()===new Date().toDateString();return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:`p-4 rounded-lg ${g?"bg-primary/10":"bg-muted/50"}`,children:[e.jsx("h3",{className:"text-xl font-semibold",children:l.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"})}),g&&e.jsx("p",{className:"text-sm text-muted-foreground",children:"Today"})]}),h.length===0?e.jsx(V,{className:"p-8 text-center",children:e.jsx("p",{className:"text-muted-foreground",children:"No events scheduled for this day"})}):e.jsx("div",{className:"space-y-3",children:h.map(t=>{var j,y,C;return e.jsx(V,{className:"p-4",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("h4",{className:"font-medium",children:t.title}),e.jsx(ue,{variant:t.type==="post"?"default":"secondary",className:t.type==="post"?"bg-primary":"bg-success",children:t.type})]}),t.type==="post"&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground mb-2",children:[e.jsx("span",{className:"capitalize",children:(j=t.data.platform)==null?void 0:j.toLowerCase()}),e.jsx("span",{children:"•"}),e.jsx("span",{className:"capitalize",children:(y=t.status)==null?void 0:y.toLowerCase().replace("_"," ")})]}),t.type==="campaign"&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground mb-2",children:[e.jsx("span",{className:"capitalize",children:(C=t.status)==null?void 0:C.toLowerCase().replace("_"," ")}),e.jsx("span",{children:"•"}),e.jsxs("span",{children:[t.data.start?new Date(t.data.start).toLocaleDateString():"N/A"," - ",t.data.end?new Date(t.data.end).toLocaleDateString():"N/A"]})]}),t.type==="post"&&t.data.attachments&&t.data.attachments.length>0&&e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[t.data.attachments.slice(0,3).map(d=>e.jsx("div",{className:"w-12 h-12 rounded border overflow-hidden",children:d.kind==="IMAGE"?e.jsx("img",{src:d.url.startsWith("http")?d.url:`${d.url}`,alt:d.name,className:"w-full h-full object-cover",onError:M=>{const H=M.target;H.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgZmlsbD0iI2NjYyIvPjx0ZXh0IHg9IjUwIiB5PSI1MCIgZm9udC1zaXplPSIxMiIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPkltYWdlPC90ZXh0Pjwvc3ZnPg=="}}):d.kind==="VIDEO"?e.jsx("div",{className:"w-full h-full bg-muted flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-muted-foreground",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z",clipRule:"evenodd"})})}):e.jsx("div",{className:"w-full h-full bg-muted flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-muted-foreground",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z",clipRule:"evenodd"})})})},d.id)),t.data.attachments.length>3&&e.jsxs("div",{className:"w-12 h-12 rounded border bg-muted flex items-center justify-center text-xs",children:["+",t.data.attachments.length-3]})]})]}),e.jsxs("div",{className:"flex space-x-1",children:[t.type==="post"&&e.jsxs(e.Fragment,{children:[e.jsx(x,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",onClick:d=>{d.stopPropagation(),L(t.data.id)},children:e.jsx(ie,{className:"h-4 w-4"})}),e.jsx(x,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",onClick:d=>{d.stopPropagation(),u(t.data.id)},children:e.jsx(de,{className:"h-4 w-4"})}),e.jsx(x,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",onClick:d=>{d.stopPropagation(),m(t.data.id)},children:e.jsx(oe,{className:"h-4 w-4"})})]}),t.type==="campaign"&&e.jsxs(e.Fragment,{children:[e.jsx(x,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",onClick:d=>{d.stopPropagation(),n(t.data.id)},children:e.jsx(ie,{className:"h-4 w-4"})}),e.jsx(x,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",onClick:d=>{d.stopPropagation(),c(t.data)},children:e.jsx(de,{className:"h-4 w-4"})}),e.jsx(x,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",onClick:d=>{d.stopPropagation(),z(t.data.id)},children:e.jsx(oe,{className:"h-4 w-4"})})]})]})]})},t.id)})})]})};return e.jsxs("div",{className:"bg-background rounded-lg border border-border",children:[p==="month"&&e.jsxs("div",{className:"grid grid-cols-7 gap-px bg-border rounded-lg overflow-hidden",children:[A.map(l=>e.jsx("div",{className:"p-2 text-center text-sm font-medium text-muted-foreground bg-background",children:l.substring(0,3)},l)),v()]}),p==="week"&&U(),p==="day"&&W()]})}const _e=()=>{var Z;const[r,p]=I.useState(new Date),[o,E]=I.useState("month"),[L,u]=I.useState(!1),[m,n]=I.useState(null),[c,z]=I.useState(null),b=$e(),{data:T,loading:w,deleteItem:B}=Fe(),D=T||[],R=B||(async s=>(console.warn("Delete not implemented"),!1)),{campaigns:A,loading:v,addCampaign:U,updateCampaign:W,deleteCampaign:l}=Ie(),g=(()=>{const s=[];return D.forEach(a=>{if(a.id&&a.title&&a.scheduledAt){const N=a.scheduledAt instanceof Date?a.scheduledAt:new Date(a.scheduledAt);a.id&&a.id!=="undefined"&&a.id!=="null"&&s.push({id:`post-${a.id}`,title:a.title,date:N,type:"post",status:a.status,platform:a.platform,data:a})}}),A.forEach(a=>{if(!a.id||!a.name)return;const N=a.start instanceof Date?a.start:new Date(a.start),i=a.end instanceof Date?a.end:new Date(a.end);a.id&&a.id!=="undefined"&&a.id!=="null"&&(s.push({id:`campaign-${a.id}`,title:a.name,date:N,type:"campaign",status:a.status,data:a}),s.push({id:`campaign-end-${a.id}`,title:`${a.name} ends`,date:i,type:"campaign-end",status:a.status,data:a}))}),s})(),t=()=>{b("/posts/create")},j=()=>{p(o==="month"?new Date(r.getFullYear(),r.getMonth()-1):o==="week"?new Date(r.getFullYear(),r.getMonth(),r.getDate()-7):new Date(r.getFullYear(),r.getMonth(),r.getDate()-1))},y=()=>{p(o==="month"?new Date(r.getFullYear(),r.getMonth()+1):o==="week"?new Date(r.getFullYear(),r.getMonth(),r.getDate()+7):new Date(r.getFullYear(),r.getMonth(),r.getDate()+1))},C=()=>{p(new Date),o==="day"&&z(new Date)},d=s=>{try{if(m)W(m.id,{name:s.name,description:s.description,status:s.status,start:s.startDate,end:s.endDate,budgetCents:s.budget*100,channels:s.channels})&&f({title:"Campaign Updated",description:`Campaign "${s.name}" has been updated successfully!`});else{const a=U({name:s.name,description:s.description,status:s.status,start:s.startDate,end:s.endDate,budgetCents:s.budget*100,channels:s.channels,createdBy:{id:"1",email:"",name:"",role:"ADMIN",createdAt:new Date,updatedAt:new Date}});f({title:"Campaign Created",description:`Campaign "${s.name}" has been created successfully!`})}u(!1),n(null)}catch{f({title:"Error",description:"Failed to save campaign. Please try again.",variant:"destructive"})}},M=s=>{if(!s||s==="undefined"||s==="null"){f({title:"Error",description:`Invalid post ID: ${s}. Cannot view post.`,variant:"destructive"});return}b(`/posts/view/${s}`)},H=s=>{if(console.log("Calendar: Attempting to edit post with ID:",s),!s||s==="undefined"||s==="null"){console.error("Calendar: Invalid post ID provided:",s),f({title:"Error",description:`Invalid post ID: ${s}. Cannot edit post.`,variant:"destructive"});return}b(`/posts/edit/${s}`)},xe=async s=>{if(console.log("Calendar: Attempting to delete post with ID:",s),!s||s==="undefined"||s==="null"){console.error("Calendar: Invalid post ID provided:",s),f({title:"Error",description:`Invalid post ID: ${s}. Cannot delete post.`,variant:"destructive"});return}window.confirm("Are you sure you want to delete this post?")&&(await R(s)?f({title:"Post Deleted",description:"The post has been deleted successfully!"}):f({title:"Error",description:"Failed to delete post. Please try again.",variant:"destructive"}))},ge=s=>{if(console.log("Calendar: Attempting to view campaign with ID:",s),!s||s==="undefined"||s==="null"){console.error("Calendar: Invalid campaign ID provided:",s),f({title:"Error",description:`Invalid campaign ID: ${s}. Cannot view campaign.`,variant:"destructive"});return}f({title:"View Campaign",description:"Viewing campaign details..."}),console.log("Calendar: Viewing campaign:",s)},pe=s=>{n(s),u(!0)},je=async s=>{if(console.log("Calendar: Attempting to delete campaign with ID:",s),!s||s==="undefined"||s==="null"){console.error("Calendar: Invalid campaign ID provided:",s),f({title:"Error",description:`Invalid campaign ID: ${s}. Cannot delete campaign.`,variant:"destructive"});return}window.confirm("Are you sure you want to delete this campaign?")&&(await l(s)?f({title:"Campaign Deleted",description:"The campaign has been deleted successfully!"}):f({title:"Error",description:"Failed to delete campaign. Please try again.",variant:"destructive"}))},fe=()=>{const s=`data:text/csv;charset=utf-8,Report Type,Date Range,Total Posts,Total Campaigns\\nContent Calendar,${new Date().toLocaleDateString()},${D.length},${A.length}\\n\\nPosts Details\\nTitle,Platform,Status,Scheduled Date\\n${D.map(i=>`"${i.title}",${i.platform},${i.status},"${i.scheduledAt?(i.scheduledAt instanceof Date?i.scheduledAt:new Date(i.scheduledAt)).toLocaleDateString():"N/A"}"`).join("\\n")}\\n\\nCampaign Details\\nName,Status,Start Date,End Date,Budget\\n${A.map(i=>`"${i.name}",${i.status},"${i.start?(i.start instanceof Date?i.start:new Date(i.start)).toLocaleDateString():"N/A"}","${i.end?(i.end instanceof Date?i.end:new Date(i.end)).toLocaleDateString():"N/A"}",${(i.budgetCents||0)/100}`).join("\\n")}`,a=encodeURI(s),N=document.createElement("a");N.setAttribute("href",a),N.setAttribute("download",`content_calendar_report_${new Date().toISOString().split("T")[0]}.csv`),document.body.appendChild(N),N.click(),document.body.removeChild(N),f({title:"Report Exported",description:"Your report has been exported successfully!"})},we=()=>{n(null),u(!0)},Ne=s=>{const a=[],N=new Date(s);N.setDate(s.getDate()-s.getDay());for(let i=0;i<7;i++){const G=new Date(N);G.setDate(N.getDate()+i),a.push(G)}return a},Ce=["January","February","March","April","May","June","July","August","September","October","November","December"];return e.jsx(ze,{children:e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Content Calendar"}),e.jsxs(ue,{variant:"secondary",className:"text-sm",children:[D.length," posts, ",A.length," campaigns"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(x,{onClick:fe,variant:"outline",size:"sm",children:[e.jsx(ce,{className:"h-4 w-4 mr-2"}),"Export Report"]}),e.jsxs(x,{onClick:we,variant:"outline",size:"sm",children:[e.jsx(me,{className:"h-4 w-4 mr-2"}),"New Campaign"]}),e.jsxs(x,{onClick:t,children:[e.jsx(me,{className:"h-4 w-4 mr-2"}),"Create Post"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(x,{variant:"outline",size:"sm",onClick:j,disabled:w||v,children:e.jsx(Ve,{className:"h-4 w-4"})}),e.jsx(x,{variant:"outline",size:"sm",onClick:C,disabled:w||v,children:"Today"}),e.jsx(x,{variant:"outline",size:"sm",onClick:y,disabled:w||v,children:e.jsx(Le,{className:"h-4 w-4"})}),e.jsxs("h2",{className:"text-xl font-semibold ml-4",children:[o==="month"&&`${Ce[r.getMonth()]} ${r.getFullYear()}`,o==="week"&&`Week of ${Ne(r)[0].toLocaleDateString()}`,o==="day"&&r.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(x,{variant:o==="month"?"default":"outline",size:"sm",onClick:()=>E("month"),disabled:w||v,children:[e.jsx(Be,{className:"h-4 w-4 mr-2"}),"Month"]}),e.jsxs(x,{variant:o==="week"?"default":"outline",size:"sm",onClick:()=>E("week"),disabled:w||v,children:[e.jsx(Re,{className:"h-4 w-4 mr-2"}),"Week"]}),e.jsxs(x,{variant:o==="day"?"default":"outline",size:"sm",onClick:()=>E("day"),disabled:w||v,children:[e.jsx(he,{className:"h-4 w-4 mr-2"}),"Day"]})]})]}),(w||v)&&e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading calendar data..."})]})}),!(w||v)&&e.jsx(Je,{currentDate:r,view:o,selectedDate:c,calendarEvents:g,onViewPost:M,onEditPost:H,onDeletePost:xe,onViewCampaign:ge,onEditCampaign:pe,onDeleteCampaign:je,onDateSelect:z,onChangeView:E}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(V,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Posts"}),e.jsx("p",{className:"text-2xl font-bold",children:D.length})]}),e.jsx("div",{className:"p-2 bg-primary/10 rounded-full",children:e.jsx(ce,{className:"h-6 w-6 text-primary"})})]})}),e.jsx(V,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Scheduled"}),e.jsx("p",{className:"text-2xl font-bold",children:D.filter(s=>s.status==="SCHEDULED").length})]}),e.jsx("div",{className:"p-2 bg-warning/10 rounded-full",children:e.jsx(he,{className:"h-6 w-6 text-warning"})})]})}),e.jsx(V,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Published"}),e.jsx("p",{className:"text-2xl font-bold",children:D.filter(s=>s.status==="POSTED").length})]}),e.jsx("div",{className:"p-2 bg-success/10 rounded-full",children:e.jsx(Ye,{className:"h-6 w-6 text-success"})})]})}),e.jsx(V,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Active Campaigns"}),e.jsx("p",{className:"text-2xl font-bold",children:A.filter(s=>s.status==="ACTIVE").length})]}),e.jsx("div",{className:"p-2 bg-blue-500/10 rounded-full",children:e.jsx(Oe,{className:"h-6 w-6 text-blue-500"})})]})})]}),e.jsx(Ue,{open:L,onOpenChange:u,children:e.jsxs(We,{className:"max-w-2xl",children:[e.jsx(He,{children:e.jsx(Ze,{children:m?"Edit Campaign":"Create New Campaign"})}),e.jsx(Ke,{onSubmit:d,onCancel:()=>{u(!1),n(null)},initialData:m?{name:m.name,description:m.description,status:m.status,startDate:m.start instanceof Date?m.start:new Date(m.start),endDate:m.end instanceof Date?m.end:new Date(m.end),budget:m.budgetCents?m.budgetCents/100:0,channels:m.channels||[],createdBy:((Z=m.createdBy)==null?void 0:Z.id)||""}:void 0})]})})]})})};export{_e as default};
